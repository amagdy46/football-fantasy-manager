generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(dbgenerated("uuidv7()"))
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  team      Team?
}

model Team {
  id        String   @id @default(dbgenerated("uuidv7()"))
  userId    String   @unique
  name      String   @default("My Team")
  budget    Decimal  @default(5000000)
  isReady   Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  players   Player[]
  user      User     @relation(fields: [userId], references: [id])
}

model Player {
  id               String   @id @default(dbgenerated("uuidv7()"))
  teamId           String
  name             String
  position         Position
  age              Int
  country          String
  value            Decimal
  goals            Int      @default(0)
  assists          Int      @default(0)
  isOnTransferList Boolean  @default(false)
  askingPrice      Decimal?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  isStarter        Boolean  @default(false)
  team             Team     @relation(fields: [teamId], references: [id])
}

model PlayerPool {
  id           String   @id @default(dbgenerated("uuidv7()"))
  externalId   String   @unique
  name         String
  position     Position
  age          Int
  country      String
  originalTeam String?
  imageUrl     String?
  marketValue  Decimal
  goals        Int      @default(0)
  assists      Int      @default(0)
  createdAt    DateTime @default(now())
}

enum Position {
  GK
  DEF
  MID
  ATT
}
